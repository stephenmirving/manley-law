!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("rb_wixui.thunderbolt[GoogleMap]",["react"],t):"object"==typeof exports?exports["rb_wixui.thunderbolt[GoogleMap]"]=t(require("react")):e["rb_wixui.thunderbolt[GoogleMap]"]=t(e.React)}("undefined"!=typeof self?self:this,(function(e){return function(){var t={5329:function(t){"use strict";t.exports=e},448:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://static.parastorage.com/services/editor-elements-library/dist/thunderbolt/";var o={};return function(){"use strict";r.r(o),r.d(o,{components:function(){return J}});var e=r(448),t=r.n(e),n=r(5329);function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var s=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r};const i=()=>"undefined"!=typeof window,l=e=>Object.entries(e).reduce(((e,[t,n])=>(t.includes("data-")&&(e[t]=n),e)),{});const c=(...e)=>e.map((e=>e?`wixui-${e}`:"")).join(" ");var u={root:"google-map"};const d=e=>e.replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)),p=(((e,t,n=[])=>{e.reduce(((e,t)=>({...e,[t]:!0})),{}),n.length})(["experiments"],(e=>{let{experiments:t}=e;return t["specs.thunderbolt.shouldExportCurrentConsentPolicy"]?"WithConsentWrapper":void 0})),e=>({consentPolicy:e.currentConsentPolicy,openSettingModal:e.openSettingModal}));function f(){const e=n.useRef([]);return[n.useCallback((()=>new Promise((t=>e.current.push(t)))),[]),n.useCallback((t=>{e.current.forEach((e=>e(t))),e.current.length=0}),[])]}const m=(e,t)=>{if(e||t)return t?{path:e,fillColor:t,strokeColor:t,fillOpacity:1,scale:.5}:(e=>{if(e&&e.endsWith(".webp"))try{const t=e.match(/media\/[^/]+/)[0].split(".")[1];e=e.replace(/.webp$/,"."+t)}catch(e){}return e})(e)},g=e=>e.map((e=>({...e,icon:m(e.pinIcon,e.pinColor)})));var v="load",y="message",h="SET_INITIAL_LOCATIONS",M="SET_CENTER",E="CENTER_UPDATED",b="SET_ZOOM",S="ZOOM_UPDATED",w="MARKER_CLICKED",C="MAP_CLICKED",O="GET_MARKERS",_="MARKERS",k="FIT_BOUNDS",N="MAP_IDLE",x="OPEN_INFO_WINDOW",R="TILES_LOADED",D="SET_MARKER_ICON",I="SET_MARKER_ICON_FINISHED";function L(e,t,r){let{mapData:o,isEditorMode:a}=t,{onUpdateZoom:s,onUpdateCenter:l,onMarkerClicked:c,onMapClicked:u}=r;const d=(0,n.useRef)([]),p=(0,n.useRef)(null),[m,L]=f(),[P,j]=f(),[A,T]=f(),[U,W]=f(),[G,J]=f(),[F,K]=f(),[Z,z]=f(),[V,B]=(0,n.useState)(!1),H=e=>{const t=p.current;return g(t||e)},$=(0,n.useMemo)((()=>({...o,locations:H(o.locations)})),[o]),q=function(e,t){void 0===t&&(t=null);const r=(0,n.useRef)(t);return(0,n.useEffect)((()=>{r.current=e}),[e]),r.current}($),Q={[E]:e=>null==l?void 0:l(e),[S]:e=>null==s?void 0:s({zoom:e}),[w]:e=>null==c?void 0:c({type:"markerClicked",...e}),[C]:e=>{let{longitude:t,latitude:n,...r}=e;return null==u?void 0:u({type:"mapClicked",location:{longitude:t,latitude:n},...r})},[_]:e=>L(e),[N]:()=>{const e=d.current.shift();null==e||e()},[R]:()=>{V||B(!0)},[I]:()=>z()},X={[v]:e=>{let{_sendMessage:t}=e;t({type:h,data:JSON.stringify({...o,locations:H(o.locations)})},{forceSend:!0})},[y]:e=>{let{event:t}=e;if("string"==typeof t.payload){var n;const{type:e,data:r}=JSON.parse(t.payload);null==(n=Q[e])||n.call(Q,r)}}},[Y,ee]=function(e){let{reducer:t=(()=>({})),iframeLoaded:r}=e;const o=(0,n.useRef)([]),a=(0,n.useRef)(void 0),s=(0,n.useRef)(void 0),l=(0,n.useRef)(void 0),c=(0,n.useCallback)(((e,t)=>{if(a.current&&r||null!=t&&t.forceSend){var n;const t=null==(n=a.current)?void 0:n.contentWindow;return void(null==t||t.postMessage(e,"*"))}if(!a.current||!s.current||!1===r)return void o.current.push(e);const i=a.current.contentWindow;null==i||i.postMessage(e,"*")}),[r]),u=(0,n.useCallback)((()=>{0!==o.current.length&&!1!==r&&(o.current.forEach((e=>c(e))),o.current=[])}),[c,r]),d=(0,n.useCallback)((e=>{if(l.current&&(l.current(),l.current=void 0),!e)return;const n=()=>{s.current=!0,u(),t({type:"load"},c)};e.addEventListener("load",n),a.current=e,l.current=()=>{e.removeEventListener("load",n)}}),[t,c,u]);return(0,n.useEffect)((()=>{r&&u()}),[r,u]),(0,n.useEffect)((()=>{if(!i())return;const e=e=>{var n;e.source&&e.source!==(null==(n=a.current)?void 0:n.contentWindow)||t({type:"message",payload:e.data},c)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[t,c]),[d,c]}({reducer:(e,t)=>{var n;return null==(n=X[e.type])?void 0:n.call(X,{event:e,_sendMessage:t})},iframeLoaded:V});return(0,n.useImperativeHandle)(e,(()=>({setMapCenter:(e,t)=>{const n=P();return ee({type:M,data:JSON.stringify({longitude:e,latitude:t})}),d.current.push(j),n},fitBounds:e=>{let{north:t,east:n,west:r,south:o}=e;const a=U();return ee({type:k,data:JSON.stringify({north:t,east:n,west:r,south:o})}),d.current.push(W),a},setMarkerIcon:e=>{let{locations:t,coordinates:n,iconOptions:r}=e;const o=Z();return p.current=t,ee({type:D,data:JSON.stringify({...n,iconOptions:r})}),o},setMapZoom:e=>{const t=A();return ee({type:b,data:e}),d.current.push(T),t},getVisibleMarkers:()=>{const e=m();return ee({type:O}),e},openInfoWindow:e=>{if(!$.showDirectionsLink){const t=F();return ee({type:x,data:JSON.stringify({locationIndex:e})}),d.current.push(K),t}return new Promise((e=>e()))},setMarkers:(e,t)=>{const n=G();return p.current=e,ee(JSON.stringify({...$,locations:g(e),openInfoWindow:null==t?void 0:t.openInfoWindow})),d.current.push(J),n}}))),(0,n.useEffect)((()=>{if(!V||!a)return;const e=!!q&&(t=$.locations,n=q.locations,t.length===n.length&&t.every(((e,t)=>{const r=Object.keys(e);return r.length===Object.keys(n[t]).length&&r.every((r=>"locationLinkAttributes"===r||e[r]===n[t][r]))})));var t,n;ee(JSON.stringify({...$,locations:H($.locations),shouldKeepMarkers:e}))}),[$,ee,V,q,a]),[Y]}var P={GoogleMapSkin:"azCDHJ",googleMapSkin:"azCDHJ",mapContainer:"UXiAup",GoogleMapDefault:"gzNVjA",googleMapDefault:"gzNVjA",GoogleMapSloppy:"FiDpOP",googleMapSloppy:"FiDpOP",brd:"vWE6wc",one:"dj3FJn",two:"W_nooy",GoogleMapLiftedShadow:"e4y5ni",googleMapLiftedShadow:"e4y5ni",shd:"up3Bvs",left:"h0JKNn",right:"uaUROu"};const j={GoogleMapLiftedShadow:()=>n.createElement(n.Fragment,null,n.createElement("div",{className:s(P.left,P.shd)}),n.createElement("div",{className:s(P.right,P.shd)})),GoogleMapSloppy:()=>n.createElement(n.Fragment,null,n.createElement("div",{className:s(P.brd,P.one)}),n.createElement("div",{className:s(P.brd,P.two)})),GoogleMapSkin:()=>n.createElement(n.Fragment,null),GoogleMapDefault:()=>n.createElement(n.Fragment,null)};var A=r.p+"media/googleMap.ea5928de.html",T=r.p+"media/google-map.min.78e15006.js";const U=e=>e.replace("https://static.parastorage.com/services/","https://editor.wix.com/_partials/"),W=(e,r)=>{const{id:o,className:a,customClassNames:d=[],skin:p,urlQueries:f,mapData:m,translations:g,isConsentPolicyActive:v,onUpdateCenter:y,onUpdateZoom:h,onMarkerClicked:M,onMapClicked:E,onMouseEnter:b,onMouseLeave:S,isDesignerMode:w,isEditorMode:C}=e,O=j[p],_=((e,t)=>{const n=t?U(T):T,r=new URLSearchParams({googleMapsScriptPath:new URL(n).pathname});return i()&&r.append("origin",window.origin),(t?U(A):A)+"?"+e+"&"+r})(f,w),[k,N]=n.useState(!1),[x]=L(r,{mapData:m,isEditorMode:C},{onUpdateCenter:y,onUpdateZoom:h,onMarkerClicked:M,onMapClicked:E});n.useEffect((()=>{N(!0)}),[_]);const R=g.title,D=((e,t)=>e?{}:t)(v,{id:o,className:s(P[p],P.wixIframe,a,c(u.root,...d)),...l(e)});return n.createElement("div",t()({},D,{tabIndex:0}),k&&n.createElement("wix-iframe",{title:R,"aria-label":R,"data-src":_},n.createElement(O,null),n.createElement("div",{id:"mapContainer_"+o,onMouseEnter:b,onMouseLeave:S,className:P.mapContainer},n.createElement("iframe",{ref:x,title:R,"aria-label":R,"data-src":_,width:"100%",height:"100%",frameBorder:"0",scrolling:"no",allowFullScreen:!0}))))};var G;const J={GoogleMap:{component:n.forwardRef(W),controller:(G=e=>{let{stateValues:t,mapperProps:n}=e;return{...n,...p(t)}},{useComponentProps:(e,t,n)=>{const r=(e=>({...e,updateStyles:t=>{const n=Object.entries(t).reduce(((e,[t,n])=>{return{...e,[(r=t,r.startsWith("--")?t:d(t))]:void 0===n?null:n};var r}),{});e.updateStyles(n)}}))(n);return G({mapperProps:e,stateValues:t,controllerUtils:r})}})}}}(),o}()}));
//# sourceMappingURL=https://static.parastorage.com/services/editor-elements-library/dist/thunderbolt/rb_wixui.thunderbolt[GoogleMap].3215d4c4.bundle.min.js.map